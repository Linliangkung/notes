## 代码规范

### 1.异常规范

#### 1.1 异常分类

异常通常分为两个大类，分别是业务异常和系统异常。

1. 业务异常：系统业务流程中的一些错误情况。如参数异常（长度，格式等不规范等）、流程异常（报名活动失效、重复报名等）、第三方服务的业务异常等。
2. 系统异常：系统运行时遇到的错误情况。如框架异常、第三方服务（中间件）不可用异常、类型转换数值转换异常等。



#### 1.2 异常的使用

系统中并非所有异常中断都需要通过抛出异常去实现，有时候善用return更是一种好办法，毕竟抛出异常会生成一大坨异常堆栈，对系统性能也是有影响的。

>return的使用？
>
>1. 如果调用方不关心被调用方异常结果使用return。
>2. Controller层所有异常情况使用return中断。（我们为什么会抛出异常，无非就是想要在接口告诉前端当前是什么异常。一般我们Controller都会声明一个Response或者Result的响应体，所以当我们在Controller中处理异常的时候可以通过return 一个异常的Response即可）

>异常的使用？
>
>1. 如果调用方关心被调用方的异常情况，则抛出异常。
>2. Service层抛出异常通知调用方异常情况，这种形式比返回Response或Result等更加雅观。



#### 1.3 异常的处理

1. 业务异常应在系统中应声明为Checked Exception，一般命名为ApplicationException或BusinessException，调用方需显式捕获的。Service层抛出一个业务异常，Controller可以捕获也可以不捕获，交给全局异常处理。一般而言，捕获业务异常可以做一些降级处理等操作或者将业务异常转换成另一种形式的响应。对于业务异常，返回给前端应该是200的http响应码，再通过业务响应码区分异常。

   系统应该声明一个业务异常响应码常量类，不同业务异常响应码应划分码段，便于管理和文档输出。

   

2. 系统异常应该在系统中声明未Unchecked Exception，因为系统异常是系统运行过程中无法预知的异常。如果我们需要自定义系统异常一般命名为SystemException。常见的系统异常有IOException、SqlException、框架自定义的异常。对于系统异常，返回给前端应该是500的http响应码。由于系统异常都是一些比较专业性的异常， 用户无需感知，前端对500异常给予统一提示即可。

